"use strict";(self.webpackChunkkurs_javascript=self.webpackChunkkurs_javascript||[]).push([[8383],{4224:(n,a,s)=>{s.r(a),s.d(a,{data:()=>e});const e={key:"v-69750923",path:"/klasy/klasy-w-javascript/",title:"Klasy w JavaScript",lang:"pl-PL",frontmatter:{permalink:"/klasy/klasy-w-javascript"},excerpt:"",headers:[{level:2,title:"Tworzenie klas za pomocą class",slug:"tworzenie-klas-za-pomoca-class",children:[]},{level:2,title:"Różnice między klasą, a funkcją",slug:"roznice-miedzy-klasa-a-funkcja",children:[]},{level:2,title:"Inne tworzenie klas",slug:"inne-tworzenie-klas",children:[]},{level:2,title:"Co warto zapamiętać",slug:"co-warto-zapamietac",children:[]}],filePathRelative:"klasy/01-klasy-w-javascript.md",git:{}}},91:(n,a,s)=>{s.r(a),s.d(a,{default:()=>t});var e=s(6252);const p=(0,e.uE)('<h1 id="klasy-w-javascript" tabindex="-1"><a class="header-anchor" href="#klasy-w-javascript" aria-hidden="true">#</a> Klasy w JavaScript</h1><p>Do czasów ECMAScript 6 w JavaScript nie było konstrukcji klas. Do tworzenia własnych typów i namiastek klas używano funkcji wywoływanej z konstruktorem. Szczegółowe działanie tego mechanizmu opisałem w dziale o prototypach. W ES6 pojawiły się klasy, które w dużej mierze są <em>syntatic sugar</em> dla konstruktora funkcji z paroma różnicami. Niemniej jest to konstrukcja bardziej nowoczesna i przyjazna dla oka.</p><h2 id="tworzenie-klas-za-pomoca-class" tabindex="-1"><a class="header-anchor" href="#tworzenie-klas-za-pomoca-class" aria-hidden="true">#</a> Tworzenie klas za pomocą class</h2><p>Na początek przypomnę jak tworzyć obiekty i zasymulować działanie klasy za pomocą funkcji:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">PersonFunction</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">print</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> functionObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersonFunction</span><span class="token punctuation">(</span><span class="token string">&#39;Rambo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nfunctionObj<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Rambo</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>functionObj <span class="token keyword">instanceof</span> <span class="token class-name">PersonFunction</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Tworzymy funkcję, którą według standardów zapisujemy wielką literą. W ciele funkcji wykorzystujemy <code>this</code> to tworzenia właściwości. Mamy tutaj pole <code>name</code>, które będzie przyjmowało wartość przekazywanego parametru. Mam też zdefiniowaną metodę <code>print</code> , która wypisuje pole <code>name</code>.</p><p>Taką funkcję wywołujemy przez konstruktor ze słówkiem <code>new</code>. To, co zwraca funkcja to obiekt, który ma własny typ <code>PersonFunction</code>.</p><p>Stwórzmy teraz klasę, która ma dokładnie te same właściwości:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">PersonClass</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> classObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersonClass</span><span class="token punctuation">(</span><span class="token string">&#39;Terminator&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nclassObj<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Terminator</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>classObj <span class="token keyword">instanceof</span> <span class="token class-name">PersonClass</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Do konstrukcji klasy używamy słowa kluczowego <code>class</code>. Zaraz po nim podajemy nazwę klasy, także według standardów nazwy klas piszemy zawsze wielką literą. Po nazwie klasy od razu otwieramy klamerki i tworzymy ciało klasy.</p><p>Pierwszym elementem jest konstruktor. Jest to metoda specjalna i może wystąpić tylko raz w całej klasie, albo wcale. Konstruktor uruchamia się zawsze na początku tworzenia klasy, jest to pierwsza wywołana metoda przez JavaScript i nie zależy to od nas.</p><p>W konstruktorze za pomocą <code>this</code> definiujemy pola w klasie. Konstruktor przyjmuje parametry, które są między innymi inicjalizacyjnymi wartościami dla pól klasy.</p><p>Niżej mamy też metodę <code>print</code>, która wypisuje pole <code>name</code> do konsoli, w przypadku klas nie musimy używać słowa <code>function</code>. Tak wygląda właśnie klasa w JavaScript. Wydaje się trochę bardziej czytelna. Nie musimy tutaj używać dodatkowych średników czy przecinków oddzielających kolejne właściwości w klasie.</p><p>Stworzenie obiektu z klasy wygląda tak samo, jak stworzenie obiektu przy pomocy konstruktora funkcji, nie ma tutaj żadnej różnicy. Przez <code>new</code> wywołujemy nazwę klasy i do nawiasów okrągłych podajemy ewentualne parametry.</p><h2 id="roznice-miedzy-klasa-a-funkcja" tabindex="-1"><a class="header-anchor" href="#roznice-miedzy-klasa-a-funkcja" aria-hidden="true">#</a> Różnice między klasą, a funkcją</h2><p>Często spotkacie się ze stwierdzeniem, że klasy to po prostu ładniejsza składania niż funkcje, które potem wywoływane są z konstruktorem. Jednak są pewne różnice między obiektami, które powstają z tych konstrukcji:</p><p>Wystarczy wypisać te dwa obiekty do konsoli, pierwszy obiekt pochodzi z funkcji:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>functionObj<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>PersonFunction <span class="token punctuation">{</span>name: <span class="token string">&quot;Ramob&quot;</span><span class="token punctuation">,</span> print: ƒ<span class="token punctuation">}</span>\n\tname: <span class="token string">&quot;Ramob&quot;</span>\n\tprint: ƒ <span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Widzimy, że przez <code>console.log</code> możemy wypisać wszystkie właściwości obiektu, ponieważ są one wyliczalne, głównie chodzi o to, że widzimy też metod tego obiektu.</p><p>Wypiszmy teraz obiekt pochodzący z klasy:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>classObj<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>PersonClass <span class="token punctuation">{</span>name: <span class="token string">&quot;Terminator&quot;</span><span class="token punctuation">}</span>\n\tname: <span class="token string">&quot;Terminator&quot;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>W tym przypadku widzimy tylko i wyłącznie pole <code>name</code>, natomiast metoda <code>print</code> i konstruktor klasy nie jest widoczny. Metody zdefiniowane w klasie nie są wyliczalne. To oznacza też, że gdy pobieramy klucze obiektu przez <code>Object.keys</code> albo wartości przez <code>Object.values</code> to metody klasy zostaną pominięte.</p><p>Zazwyczaj jest to wygodne, ponieważ to pola klasy przetrzymują ważne dla nas informacje i nie potrzebujemy iterować po metodach obiektu.</p><p>Dodatkowo mamy kilka mniej subtelnych różnic:</p><ul><li>deklaracja klas nie podlega pod hoisting tak jak deklaracja funkcji. Czyli najpierw musimy zadeklarować klasę, a potem możemy ją użyć. Jak pamiętamy <code>hoisting</code> przenosi deklaracja funkcji na początek kodu, dlatego możliwe jest użycie funkcji przed jej deklaracją.</li><li>kod w klasie jest uruchamiany w trybie ścisłym, czyli razem z poleceniem <code>use strict</code></li><li>nie możemy wywołać klasy bez słówka <code>new</code></li><li>metod w klasie nie można wywoływać z konstruktorem, czyli ze słówkiem <code>new</code></li></ul><p>Poza tymi różnicami obiekty tworzone przez klasy są tymi samymi obiektami, które tworzymy literalnie albo przy pomocy konstruktora funkcji. Możemy na nich używać wszystkich metod pochodzących z <code>Object.prototype</code> czy też metod statycznych z <code>Object</code>. Obiekty pochodzące z klas nie są żadną nową konstrukcją JavaScript.</p><h2 id="inne-tworzenie-klas" tabindex="-1"><a class="header-anchor" href="#inne-tworzenie-klas" aria-hidden="true">#</a> Inne tworzenie klas</h2><p>Są jeszcze inne sposoby na tworzenie klas, które raczej nie są dość często spotykane w kodzie. Podobnie jak przy funkcjach, możemy tworzyć wyrażenie klasy:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> Car <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>model<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token string">&#39;Audi&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Car<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Car</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>car <span class="token keyword">instanceof</span> <span class="token class-name">Car</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>W tym zapisie tworzymy zmienną <code>Car</code> i przypisujemy wyrażenie klasy. Zauważcie, że po słowie <code>class</code> nie ma już nazwy klasy. Ten sposób jest pomocny, gdy chcemy przekazać klasę na przykład jako parametr do funkcji.</p><p>Nie ma żadnych specjalnych różnić między klasami deklarowanymi w normalny sposób a między wyrażeniami klas. Nadal możemy sprawdzić dokładnie typ naszego obiektu, który jest określony przez nazwę zmiennej.</p><p>Wyrażenie klasy może mieć też nazwę:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> Dog <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Animal<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Animal</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Dog<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Animal</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog <span class="token keyword">instanceof</span> <span class="token class-name">Dog</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n<span class="token comment">// console.log(Animal) // error</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>W tym przypadku przypisuję wyrażenie klasy do zmiennej <code>Dog</code>, ale wyrażenie to ma nazwę <code>Animal</code>. Nazwa <code>Animal</code> nie jest dostępna spoza klasy i można się do niej odwołać tylko w klasie. Obiekty tworzymy tylko za pomocą nazwy <code>Dog</code>, i również ta nazwa opisuje nasz typ.</p><p>Kolejną ciekawostką jest to, że możemy tworzyć klasy w sposób bardziej dynamiczny:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">classMaker</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>\n    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">country</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>country <span class="token operator">=</span> country<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> Person <span class="token operator">=</span> <span class="token function">classMaker</span><span class="token punctuation">(</span><span class="token string">&#39;Rambo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> City <span class="token operator">=</span> <span class="token function">classMaker</span><span class="token punctuation">(</span><span class="token string">&#39;London&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;USA&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Rambo</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;USA&#39;</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">&#39;UK&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// City</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">&#39;UK&#39;</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">City</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Mamy funkcję, która zwraca klasę anonimową. Funkcja może mieć zdefiniowane parametry, które posłużą do inicjalizacji pól dla tej klasy. Możemy również wykorzystać konstruktor. Taką funkcję możemy wykorzystać do tworzenia różnych klas o różnych nazwach, a co za tym idzie o różnych prototypach. Przydaje się, gdy dynamicznie chcemy tworzyć obiekty o tych samych właściwościach, ale jednocześnie chcemy je rozróżniać poprzez różne typy.</p><h2 id="co-warto-zapamietac" tabindex="-1"><a class="header-anchor" href="#co-warto-zapamietac" aria-hidden="true">#</a> Co warto zapamiętać</h2><ul><li>klasy to ładniejsza składnia dla konstruktora funkcji</li><li>między obiektami tworzonymi z funkcji a obiektami klasy są pewne subtelne różnice</li><li>klasy z powodzeniem zastąpiły konstruktor funkcji i są bardzo często używane we współczesnym JavaScript</li><li>tak jak funkcje, tak i klasy mogą być tworzone za pomocą wyrażenia</li></ul>',41),o={},t=(0,s(3744).Z)(o,[["render",function(n,a){const s=(0,e.up)("Comments");return(0,e.wg)(),(0,e.iD)(e.HY,null,[p,(0,e.Wm)(s)],64)}]])},3744:(n,a)=>{a.Z=(n,a)=>{for(const[s,e]of a)n[s]=e;return n}}}]);